<!DOCTYPE html>
<!--
  ~ Copyright (C) 2011 Benoit GUEROUT <bguerout at gmail dot com> and Yves AMSELLEM <amsellem dot yves at gmail dot com>
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
-->
<html><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jongo {mongo-java-driver: 'with ease'}</title>

  <link href="assets/img/jongo_favicon.png" rel="shortcut icon">
  
  <link href="assets/css/bootstrap.min.css" type="text/css" rel="stylesheet">
  <link href="assets/css/bootstrap-responsive.min.css" type="text/css" rel="stylesheet">
  <link href="assets/css/prettify.css" type="text/css" rel="stylesheet">


  <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
    
    <script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" src="assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.smoothanchors.min.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/js/prettify.js"></script>
    <script type="text/javascript" src="assets/js/jongo.js"></script>

    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="pragma" content="no-cache">
    <meta charset="utf-8">
    <meta name="description" content="Query in Java as in Mongo shell (using strings), unmarshall results into Java objects (using Jackson)">

  <link href="assets/css/jongo.css" type="text/css" rel="stylesheet"><script type="text/javascript" id="ga-script">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-30202616-1']);
_gaq.push(['_trackPageview']);

(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script><style type="text/css"></style></head>

  <body data-spy="scroll" id="jongo" cz-shortcut-listen="true">
      
      <div class="navbar navbar-static-top affix">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="/">Jongo</a>
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
            </a>

            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#updating">Updating</a></li>
                <li><a href="#mapping">Mapping</a></li>
                <li><a href="#querying">Querying</a></li>
                <li><a href="#advanced">Advanced</a></li>
              </ul>
              <ul class="nav pull-right">
                <li><a href="https://groups.google.com/forum/?fromgroups#!forum/jongo-user" target="_blank"><i class="icon-envelope icon-white"></i> Mailinglist</a></li>
                <li><a href="https://github.com/bguerout/jongo" target="_blank"><i class="icon-github"></i> GitHub</a></li>
                <li><a href="#maven"><i class="icon-download-alt icon-white"></i> Download</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="container">

        <section class="offset1">
            <div class="page-header">
                <h1>Document for Jongo v0.4</h1>
            </div>
            <div class="row">
                <div class="span9 warning">
                    0.4 is a deprecated version, please go to <a href="/">main page</a> to get up-to-date documentation
                </div>
            </div>
        </section>

        <section id="usage" class="offset1">
          <div class="row">
            <div class="span9 header"><h1>Set up</h1></div>
            <div class="span9">
              <p>
                First <a href="http://www.mongodb.org/display/DOCS/Quickstart" target="_blank">install Mongo</a>, then <a href="#maven">download Jongo</a> and you're all set.
              </p>
              <pre class="prettyprint"><span class="pln">DB db </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Mongo</span><span class="pun">().</span><span class="pln">getDB</span><span class="pun">(</span><span class="str">"dbname"</span><span class="pun">);</span><span class="pln">

</span><span class="typ">Jongo</span><span class="pln"> jongo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Jongo</span><span class="pun">(</span><span class="pln">db</span><span class="pun">);</span><span class="pln">
</span><span class="typ">MongoCollection</span><span class="pln"> friends </span><span class="pun">=</span><span class="pln"> jongo</span><span class="pun">.</span><span class="pln">getCollection</span><span class="pun">(</span><span class="str">"friends"</span><span class="pun">);</span><span class="pln">

</span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="typ">Friend</span><span class="pun">&gt;</span><span class="pln"> all </span><span class="pun">=</span><span class="pln"> friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
</span><span class="typ">Friend</span><span class="pln"> one </span><span class="pun">=</span><span class="pln"> friends</span><span class="pun">.</span><span class="pln">findOne</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

              </div></div></section>

              <section id="updating" class="offset1">
                <div class="row">
                  <div class="span9 header"><h1>Updating</h1></div>
                  <div class="span9">
                    <h2 id="save">Save</h2>

                    <p>Passing an object to the <code>save(..)</code> method will do the job. See <a href="#mapping">mapping section</a> for objects defintion.
                    </p>
                    <pre class="prettyprint"><span class="typ">Friend</span><span class="pln"> joe </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Friend</span><span class="pun">(</span><span class="str">"Joe"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">27</span><span class="pun">);</span><span class="pln">

friends</span><span class="pun">.</span><span class="pln">save</span><span class="pun">(</span><span class="pln">joe</span><span class="pun">);</span><span class="pln">
joe</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> </span><span class="lit">28</span><span class="pun">;</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">save</span><span class="pun">(</span><span class="pln">joe</span><span class="pun">);</span></pre>

                    <h2 id="update">Update</h2>

                    <p>Update syntax is a bit different than in Mongo shell: <code>modifier</code> query has to be passed using <code>with(..)</code>. You can update with a <code>String</code> or with an object. You can also parameterize queries with <code>#</code> (<i>using primitives or complex objects</i>), see <a href="#query-templating">query templating</a> for more details.
                    </p>
                    <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="kwd">with</span><span class="pun">(</span><span class="str">"{$inc: {age: 1}}"</span><span class="pun">);</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="pln">upsert</span><span class="pun">().</span><span class="pln">multi</span><span class="pun">().</span><span class="kwd">with</span><span class="pun">(</span><span class="str">"{$inc: {age: 1}}"</span><span class="pun">);</span><span class="pln">

friends</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="kwd">merge</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Friend</span><span class="pun">(..));</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="kwd">with</span><span class="pun">(</span><span class="str">"{$set: {address: #}}"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Address</span><span class="pun">(..));</span></pre>

                      <h2 id="insert">Insert</h2>

                      <p>Insert works as in Mongo shell.</p>
                      <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="str">"{name: 'Joe', age: 18}"</span><span class="pun">);</span><span class="pln">

friends</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Friend</span><span class="pun">(..));</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Friend</span><span class="pun">(..),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Friend</span><span class="pun">(..));</span></pre>

                      <h2 id="remove">Remove</h2>

                      <p>Remove works as in Mongo shell.</p>
                      <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">);</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"4c...e"</span><span class="pun">));</span></pre>
                      </div>
                    </div>
                  </section>

                  <section id="mapping" class="offset1">
                    <div class="row">
                      <div class="span9 header"><h1>Object Mapping</h1></div>
                      <div class="span9">
                        <p>
                          Query results are automatically mapped to objects. By default, this relies on Jackson; it respects document structure, handles lists and ignores missing attributes. It just needs <strong>a no-arg constructor, even private</strong>. If the object has to be immutable, <code>@JsonCreator</code> annotation can be used instead.
                        </p>
                        <p>
                          <code>_id</code> is a unique identifier available on every Mongo document. <strong>If it isn't setted, it is generated</strong>. To handle it with Jongo, one attribute has to be named <code>_id</code> or annotated with <code>@Id</code> (<i>alias for <code>@JsonProperty("_id")</code></i>). It can be handled with the dedicated <code>ObjectId</code> class or with a simple <code>String</code> — annotated <code>@ObjectId</code>.
                        </p>

                        <p>
                          Careful, saving a document with a custom <code>_id</code> (<i>ie: any Java type, other than array, so long as it is unique</i>) always involves to set it before persisting.
                        </p>
                      </div>
                    </div>
                    <div class="row">
                      <div class="span3">
                        <pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Friend</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// generate it!</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> _id</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre>
                    </div>
                    <div class="span3">
                      <pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Friend</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@Id</span><span class="pln"> </span><span class="com">// generate it!</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> key</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre>
                    </div>
                    <div class="span3">
                      <pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Friend</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@Id</span><span class="pln"> </span><span class="com">// generate it!</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> key</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre>
                    </div>
                  </div>
                  <div class="row">
                      <div class="span3">
                        <pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Friend</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@ObjectId</span><span class="pln"> </span><span class="com">// auto</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> _id</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre>
                    </div>
                    <div class="span3">
                      <pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Friend</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@Id</span><span class="pln"> </span><span class="lit">@ObjectId</span><span class="pln"> </span><span class="com">// auto</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> key</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre>
                    </div>
                    <div class="span3">
                      <pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Friend</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// auto</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pln"> _id</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre>
                    </div>
                  </div>

                  <div class="row">
                    <div class="span9">
                      <p>
                        <code>JSON</code> properties are automatically mapped to their equivalent object attributes (<i>and complex ones mapped as sub-attributes</i>). <strong>No extra annotations needed</strong>. To ignore a pojo attribute, annotate it with <code>@JsonIgnore</code>.<br>For fine grained control over (un)marshalling, configure <a href="#jongo-mapper">Jongo mapper</a> or <a href="#custom-mapper">create your own</a>.
                      </p>

                      <h2 id="polymorphism">Handling polymorphism</h2>

                      <p>
                        To handle polymorphism of Java objects, a field containing the class name must be set into the Mongo
                        document. One can persist a <code>Fox</code> (<i>sub-class of <code>Friend</code></i>) and manipulate it
                        as a <code>Friend</code>. This feature is provided out-of-the-box by Jackson. Using another
                        (un)marshaller implies extra work.
                      </p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="span5">
                      <pre class="prettyprint"><span class="lit">@JsonTypeInfo</span><span class="pun">(</span><span class="kwd">use</span><span class="pun">=</span><span class="typ">Id</span><span class="pun">.</span><span class="pln">CLASS</span><span class="pun">,</span><span class="pln">property</span><span class="pun">=</span><span class="str">"_class"</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Friend</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> age</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre>
                    </div>
                    <div class="span4">
                      <pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Fox</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Friend</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> color</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre>
                  </div>
                </div>
                <div class="row">
                  <div class="span9">
                    <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">save</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Fox</span><span class="pun">(</span><span class="str">"fantastic"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"red-haired"</span><span class="pun">));</span><span class="pln">
</span><span class="typ">Friend</span><span class="pln"> </span><span class="kwd">friend</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> friends</span><span class="pun">.</span><span class="pln">findOne</span><span class="pun">(</span><span class="str">"{name:'fantastic'}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
</span><span class="typ">Fox</span><span class="pln"> fantastic </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Fox</span><span class="pun">)</span><span class="kwd">friend</span><span class="pun">;</span></pre>

                      <p>
                        Using a singular <strong>reserved name</strong>, like <code>_class</code>, for this field is a good idea.
                      </p>
                    </div>
                  </div>
                </section>

                <section id="querying" class="offset1">
                  <div class="row">
                    <div class="span9 header"><h1>Querying</h1></div>
                    <div class="span9">

                      <h2 id="find">Find &amp; FindOne</h2>

                      <p>
                        Query syntax is <i>almost</i> the same as in Mongo shell: copy/paste, it just works.
                        <br>Strings have to be escaped with single quotes <code>"{name: 'Joe'}"</code>, numbers don't <code>"{age:
                        18}"</code>.
                      </p>

                      <pre class="prettyprint"><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="typ">Friend</span><span class="pun">&gt;</span><span class="pln"> all </span><span class="pun">=</span><span class="pln"> friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">

</span><span class="typ">Friend</span><span class="pln"> joe </span><span class="pun">=</span><span class="pln"> friends</span><span class="pun">.</span><span class="pln">findOne</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
</span><span class="typ">Friend</span><span class="pln"> joe </span><span class="pun">=</span><span class="pln"> friends</span><span class="pun">.</span><span class="pln">findOne</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ObjectId</span><span class="pun">(</span><span class="str">"4c...e"</span><span class="pun">)).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                        <p>
                          Field names need quotes when using dot notation <code>"{'address.city': 'London'}"</code>.
                        </p>

                        <h3>Projection or Field selection</h3>
                        <p>
                          Field selection aka. partial loading is not written as in Mongo shell:
                          Jongo exposes a <code>projection(..)</code> method. A json selector must be provided: <code>{field:
                          1}</code> to include it, <code>{field: 0}</code> to exclude it.
                        </p>
                        <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">().</span><span class="pln">projection</span><span class="pun">(</span><span class="str">"{lastname: 1, address: 1}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                        <h3>Sorting</h3>
                        <p>Documents can be sorted in ascending or descending order using a json selector: <code>{field: 1}</code>
                          for ascending, <code>{field: -1}</code> for descending.
                        </p>
                        <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">().</span><span class="pln">sort</span><span class="pun">(</span><span class="str">"{firstname: 1}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">().</span><span class="pln">sort</span><span class="pun">(</span><span class="str">"{lasttname: -1}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                          <h3>Skip and Limit</h3>
                          <p>Behaviour similar to Java driver <a href="http://api.mongodb.org/java/current/com/mongodb/DBCursor.html" target="_blank">DBCursor</a>.</p>
                          <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">().</span><span class="pln">skip</span><span class="pun">(</span><span class="lit">20</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">().</span><span class="pln">limit</span><span class="pun">(</span><span class="lit">10</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                          <h3>Hint</h3>
                          <p>Behaviour similar to Java driver <a href="http://docs.mongodb.org/manual/reference/operator/hint/" target="_blank">Find.hint(..)</a>.</p>
                          <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">().</span><span class="pln">hint</span><span class="pun">(</span><span class="str">"{age: 1}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                        <h3>Oid</h3>
                        <p>
                          As said in the <a href="#mapping">mapping section</a>, <code>_id</code> identifier can be manipulated with a <code>String</code> annotated with <code>@ObjectId</code>. If you want to completly avoid using driver's <code>ObjectId</code>, Jongo offers the <code>Oid</code> class.
                        </p>

                        <pre class="prettyprint"><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">jongo</span><span class="pun">.</span><span class="typ">Oid</span><span class="pun">.</span><span class="pln">withOid</span><span class="pun">;</span><span class="pln">

</span><span class="typ">Friend</span><span class="pln"> joe </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Friend</span><span class="pun">();</span><span class="pln"> </span><span class="com">// @ObjectId String _id</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">save</span><span class="pun">(</span><span class="pln">joe</span><span class="pun">);</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">withOid</span><span class="pun">(</span><span class="pln">joe</span><span class="pun">.</span><span class="pln">id</span><span class="pun">)).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln"> </span><span class="com">// instead of new ObjectId(joe.id)</span></pre>

                            <h2 id="query-templating">Query templating</h2>

                            <p>
                              Almost all queries in Jongo can be templated: add anchors <code>#</code> as follow. Binded parameters can be <a href="http://stackoverflow.com/questions/3725386/java-types-in-org-bson-bsonobject">BSON
                              Primitives</a> or any complex type made of those.
                            </p>

                            <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"{name:#, age:#}"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Joe"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">18</span><span class="pun">);</span><span class="pln"> </span><span class="com">//→ will produce {name: 'Joe', age: 18}</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"{address: #}"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Address</span><span class="pun">(..));</span><span class="pln"> </span><span class="com">//→ will marshall Address object</span></pre>
                            <pre class="prettyprint"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> ages </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Lists</span><span class="pun">.</span><span class="pln">newArrayList</span><span class="pun">(</span><span class="lit">22</span><span class="pun">,</span><span class="pln"> </span><span class="lit">63</span><span class="pun">);</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"{age: {$in:#}}"</span><span class="pun">,</span><span class="pln"> ages</span><span class="pun">);</span><span class="pln"> </span><span class="com">//→ will produce {age: {$in:[22,63]}}</span></pre>

                              <h2 id="regex">Regular expressions</h2>

                              <p>
                                Classic <code>$regex: 'jo.*'</code> operator works in Jongo. It worth mentioning that <code>Pattern.compile("jo.*")</code> also does. Unluckily, JavaScript syntax <code>/jo*/g</code> is not available in Mongo Java Driver and Jongo cannot use it yet.
                              </p>

                              <pre class="prettyprint"><span class="pln">collection</span><span class="pun">.</span><span class="pln">findOne</span><span class="pun">(</span><span class="str">"{name: {$regex: #}}"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"jo.*"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln"> 
collection</span><span class="pun">.</span><span class="pln">findOne</span><span class="pun">(</span><span class="str">"{name:#}"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Pattern</span><span class="pun">.</span><span class="pln">compile</span><span class="pun">(</span><span class="str">"jo.*"</span><span class="pun">)).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                              <h2 id="count">Count</h2>
                              <p>Behaviour similar to Java driver <a href="http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#count()">DBCollection.count(..)</a>.</p>
                              <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">count</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">);</span></pre>

                              <h2 id="count">Command</h2>
                              <p>Behaviour pretty similar to Java driver <a href="http://docs.mongodb.org/manual/reference/method/db.runCommand">db.runCommand(..)</a>.</p>
                              <pre class="prettyprint"><span class="pln">jongo</span><span class="pun">.</span><span class="pln">runCommand</span><span class="pun">(</span><span class="str">"{geoNear: 'friends', near: [48,9]}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">GeoNearResult</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                              <h2 id="aggregation">Aggregation</h2>

                              <h3>Distinct</h3>
                              <p>Distinct syntax is almost the same as Find/FindOne operations. Optional query can be setted using <code>query(..)</code> method</p>
                              <pre class="prettyprint"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> names </span><span class="pun">=</span><span class="pln"> friends</span><span class="pun">.</span><span class="pln">distinct</span><span class="pun">(</span><span class="str">"name"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>
                              <pre class="prettyprint"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Address</span><span class="pun">&gt;</span><span class="pln"> addresses </span><span class="pun">=</span><span class="pln"> friends</span><span class="pun">.</span><span class="pln">distinct</span><span class="pun">(</span><span class="str">"address"</span><span class="pun">).</span><span class="pln">query</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Address</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                              <h3>Aggregation Framework</h3>
                              <p>Careful, this feature is only available in the Mongo v2.2 release. All aggregation operators are supported <code>$project, $match, $limit, $skip, $unwind, $group, $sort</code> and can be piped using <code>and(..)</code> method</p>
                              <pre class="prettyprint"><span class="pln">collection</span><span class="pun">.</span><span class="pln">aggregate</span><span class="pun">(</span><span class="str">"{$project:{sender:1}}"</span><span class="pun">)</span><span class="pln">
          </span><span class="pun">.</span><span class="kwd">and</span><span class="pun">(</span><span class="str">"{$match:{tags:'read'}}"</span><span class="pun">)</span><span class="pln">
          </span><span class="pun">.</span><span class="kwd">and</span><span class="pun">(</span><span class="str">"{$limit:10}"</span><span class="pun">)</span><span class="pln">
          </span><span class="pun">.</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Email</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                                <h2 id="advanced-query">Advanced query</h2>

                                <h3>Geospacial indexing</h3>
                                <p>Using <a href="http://www.mongodb.org/display/DOCS/Geospatial+Indexing" target="_blank">Mongo geospacial capacities</a> requires an index and some BSON operators.</p>
                                <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">ensureIndex</span><span class="pun">(</span><span class="str">"{address: '2d'}"</span><span class="pun">);</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"{address: {$near: [0, 0], $maxDistance: 5}}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Address</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>

                                <h3>ReadPreference &amp; WriteConcern</h3>
                                <p><a href="http://docs.mongodb.org/manual/applications/replication/" target="_blank">Read and write behaviors</a> can be configured on a query basis. <code>ReadPreference</code> defines how multiple instances are readed, <code>WriteConcern</code> defines how writes are done.</p>
                                <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">withWriteConcern</span><span class="pun">(</span><span class="pln">SAFE</span><span class="pun">).</span><span class="pln">withReadPreference</span><span class="pun">(</span><span class="pln">primaryPreferred</span><span class="pun">()).</span><span class="pln">find</span><span class="pun">(..);</span></pre>

                                <h3>Complete query syntax</h3>
                                <p>Mongo uses a <a href="http://www.mongodb.org/display/DOCS/Mongo+Query+Language">behind the scenes
                                  syntactic sugar</a> for methods like <code>sort(..)</code>, <code>limit(..)</code> and others. The
                                  complete expression can also be used in Jongo.
                                </p>
                                <pre class="prettyprint"><span class="pln">friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"{$query: {}, $maxScan: 2}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"{$query: {}, $orderby: {name: 1}}"</span><span class="pun">).</span><span class="kwd">as</span><span class="pun">(</span><span class="typ">Friend</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></pre>
                                  </div>
                                </div>
                              </section>

                              <section id="advanced" class="offset1">
                                <div class="row">
                                  <div class="span9 header"><h1>Advanced</h1></div>
                                  <div class="span9">
                                    <h2 id="performances">Performances</h2>

                                    <p>
                                      <strong>Jongo is lighting fast</strong>. Not because it is made of ancient wood and magic stones, it just binds Jackson — the fastest Java json (un)marshalling library — to Mongo Java driver with the slightest glue
                                      code possible.
                                    </p>
                                    <p>
                                      Since .3, Jongo uses Mongo Java driver as a deeper level to enhance performance. Instead of converting results into strings and unmarshalling strings into objects, it works at <code>byte[]</code> level (<i>note that query marhalling has been kept the old way, because of its specificities</i>).
                                    </p>

                                    <p>
                                      Several microbenchmarks (<i>using Caliper &amp; Yourkit</i>) highlight this release net improvements: Jongo .3 is 6 times faster than Jongo .2, which make it <strong>as fast as the driver!</strong> Have a look at <a href="http://microbenchmarks.appspot.com/run/bguerout@gmail.com/org.jongo.bench.FindBench2/2262004" target="_blank">find microbenchmark</a> and <a href="http://microbenchmarks.appspot.com/run/bguerout@gmail.com/org.jongo.bench.SaveBench/2283001" target="_blank">save microbenchmark</a>, and at their implementations (<a href="https://github.com/bguerout/jongo/blob/master/src/test/java/org/jongo/bench/FindBench.java" target="_blank">find</a> &amp; <a href="https://github.com/bguerout/jongo/blob/master/src/test/java/org/jongo/bench/SaveBench.java" target="_blank">save</a>).
                                    </p>

                                    <p>
                                      <i class="icon-flag"></i> Not all benchmarks accurately reflect real world performance; <a href="http://code.google.com/p/caliper/wiki/JavaMicrobenchmarks" target="_blank">more on microbenchmarks</a>.
                                    </p>

                                    <h2 id="jongo-mapper">Configuring Jongo Mapper</h2>

                                    <p>
                                      Jongo comes with a custom Jackson configuration that can be extended.
                                    </p>

                                    <pre class="prettyprint"><span class="pln">DB db </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Mongo</span><span class="pun">().</span><span class="pln">getDB</span><span class="pun">(</span><span class="str">"dbname"</span><span class="pun">);</span><span class="pln">

</span><span class="typ">Jongo</span><span class="pln"> jongo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Jongo</span><span class="pun">(</span><span class="pln">db</span><span class="pun">,</span><span class="pln"> 
  </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JacksonMapper</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">()</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">registerModule</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JodaModule</span><span class="pun">())</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">enable</span><span class="pun">(</span><span class="typ">MapperFeature</span><span class="pun">.</span><span class="pln">AUTO_DETECT_GETTERS</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">withView</span><span class="pun">(</span><span class="typ">Views</span><span class="pun">.</span><span class="typ">Public</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">.</span><span class="pln">build</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></pre>

                                      <h3>Mapper interface</h3>
                                      <p>
                                        Jongo constructor comes with an optional parameter: <code>Mapper</code>. This interface has a provided <code>JacksonMapper</code> implementation which defines the defaut (un)marshalling behavior of Jongo. <code>JacksonMapper.Builder</code> allows to alter this configuration as you see fit.
                                      </p>

                                      <h3>Features on/off</h3>
                                      <p>
                                        Default <code>JacksonMapper.Builder()</code> comes with a set of <a href="https://github.com/bguerout/jongo/blob/master/src/main/java/org/jongo/marshall/jackson/configuration/StandardModifier.java" target="_blank">predefined features</a> for the embedded Jackson <code>ObjectMapper</code>. Those can be overridden and extended with <code>enable(..)</code> and <code>disable(..)</code> methods.
                                      </p>

                                      <h3>Modules</h3>
                                      <p>
                                        Jackson <code>Module</code> is a set of (un)marshalling configuration. Hanlding Joda dates, for example, can be done with this <a href="https://github.com/FasterXML/jackson-datatype-joda" target="_blank">Jackson module</a> and the <code>registerModule(..)</code> method.
                                      </p>

                                      <h3>Json view</h3>
                                      <p>
                                        Jackson <code>@JsonView</code> allows to filter an object attributes on (un)marshalling. Once Jongo is configured to use the <code>Public</code> view (<i>as in the previous configuration</i>), the <code>gender</code> attribute will be ignored even if it exists in Mongo. 
                                      </p>
                                      <p>
                                        Careful, when no view is defined, Jackson ignore annotations — which means every attribute is visible. Views can be used for marshalling-only or unmarshalling-only if needed.
                                      </p>

                                      <pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Friend</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> _id</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@JsonView</span><span class="pun">(</span><span class="typ">Views</span><span class="pun">.</span><span class="typ">Private</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> gender</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Views</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Public</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Private</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Public</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
</span><span class="pun">}</span></pre>

                                  <h3>MapperModifier</h3>
                                  <p>
                                    Jongo uses the <code>MapperModifier</code> interface to configure a <code>JacksonMapper</code>. Looking at <a href="https://github.com/bguerout/jongo/blob/master/src/main/java/org/jongo/marshall/jackson/configuration/MapperFeatureModifier.java" target="_blank">one implementation</a> give a good feeling of how it can be used to further configure a <code>JacksonMapper</code>.
                                  </p>

                                  <h3>Reader &amp; WriterCallback</h3>
                                  <p>
                                    In certain circumstances, modifying Jackson <code>ObjectReader</code> or <code>ObjectWriter</code> will be useful. <code>JacksonMapper</code> offers one default <code>ReaderCallback</code> and one <code>WriterCalback</code> for that purpose, they can be replaced if needed.
                                  </p>

                                  <p>
                                    <i class="icon-wrench"></i> For more options, refer to <a href="http://wiki.fasterxml.com/JacksonDocumentation" target="_blank">Jackson documentation</a>.
                                  </p>

                                  <h2 id="custom-mapper">Using a custom Mapper</h2>

                                <p>
                                  Instead of Jackson, one can provide his own implementation of <code>Mapper</code>.
                                </p>

                                <pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">GsonMapper</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Mapper</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Marshaller</span><span class="pln"> getMarshaller</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="typ">Unmarshaller</span><span class="pln"> getUnmarshaller</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="typ">ObjectIdUpdater</span><span class="pln"> getObjectIdUpdater</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="typ">QueryFactory</span><span class="pln"> getQueryFactory</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="typ">Jongo</span><span class="pln"> jongo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Jongo</span><span class="pun">(</span><span class="pln">mongo</span><span class="pun">.</span><span class="pln">getDB</span><span class="pun">(</span><span class="str">"dbname"</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GsonMapper</span><span class="pun">());</span></pre>

                                  <h2 id="custom-result-handler">Using a custom ResultHandler</h2>

                                  <p>
                                    If one prefers to manually handle objects (<i>ie. without unmarshaller</i>), he can implements
                                    <code>ResultHandler</code>. Each result entity will be passed to the inherited <code>handle(DBObject result)</code> method.
                                  </p>

                                  <pre class="prettyprint"><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> ages </span><span class="pun">=</span><span class="pln"> friends</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"{name: 'Joe'}"</span><span class="pun">).</span><span class="pln">map</span><span class="pun">(</span><span class="pln">
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ResultHandler</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln"> handle</span><span class="pun">(</span><span class="typ">DBObject</span><span class="pln"> result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">//do manual stuff here</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"age"</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
</span><span class="pun">});</span></pre>

                              <h2 id="exposing-trough-jersey">Exposing objects through web services</h2>

                              <p>
                                Because Jongo uses Jackson by default, the same objects can be exposed through Jersey (<i>or Spring or any web services library</i>). If you decide to keep <code>ObjectId</code> in pojo attributes, the library (de)serialization have to be configured to support them (<i>using <code>@ObjectId</code> annotation on <code>String</code> avoid this problem</i>). For Jersey, use <a href="https://gist.github.com/3155831" target="_blank">this Jackson Provider</a> to expose <code>ObjectId</code> as <code>String</code>. For other web services libraries, adapting it won't be to hard.
                              </p>
                              
                                </div>
                              </div>
                            </section>

                            <section id="notes" class="offset1">
                              <div class="row">
                                <div class="span9 header"><h1>Release notes (0.3→0.4)</h1></div>
                                <div class="span9">
                                  <p>Previous releases: <a href="/tags/0.3/0.3.html">0.3</a>, <a href="/tags/0.2/0.2.html">0.2</a>, <a href="/tags/0.1/0.1.html">0.1</a></p>
                                  <dl class="dl-horizontal">
                                    <dt class="strong">Update &amp; Insert</dt><dd>operations support with pojo as parameters</dd>
                                    <dt>runCommand</dt><dd>operation support; ie: <code>geoNear</code> can now return distance from origin</dd>
                                    <dt>@Id</dt><dd><i>breaking change</i>: just an alias now; to handle <code>ObjectId</code> as <code>String</code> use <code>@ObjectId</code></dd>
                                    <dt>Read &amp; Write</dt><dd><code>ReadPreference</code> and <code>WriteConcern</code> on a query basis (<i>thanks to <a href="https://github.com/bgranvea" target="_blank">Boris Granveaud</a></i>)</dd>
                                    <dt>find</dt><dd>a <a href="http://docs.mongodb.org/manual/reference/operator/hint/" target="_blank">hint</a> can now be specified with <code>Find.hint()</code> (<i>thanks to <a href="https://github.com/dwursteisen" target="_blank">David Wursteisen</a></i>)</dd>
                                    <dt>—</dt><dd><code>Find.fields()</code> renamed to <code>Find.projection()</code> (<i>thanks to <a href="https://github.com/maximenowak" target="_blank">Maxime Nowak</a></i>)</dd>
                                    <dt>#</dt><dd>hash sign can be used in query parameters (<i>thanks to <a href="https://github.com/michel-kraemer" target="_blank">Michel Kraemer</a></i>)</dd>
                                    <dt>final</dt><dd>no more final modifier to ease unit testing (<i>thanks to <a href="https://github.com/ihr" target="_blank">Ivan Hristov</a></i>)</dd>
                                  </dl>
                                </div>
                              </div>
                            </section>

                            <section id="maven" class="offset1">
                              <div class="row">
                                <div class="span9 header"><h1>Download</h1></div>
                                <div class="span9">
                                  <p>
                                    Jongo relies upon <a href="https://github.com/FasterXML/jackson-databind" target="_blank">Jackson</a> 2.1, <a href="https://github.com/michel-kraemer/bson4jackson" target="_blank">Bson4Jackson</a> 2.1 and <a href="https://github.com/mongodb/mongo-java-driver" target="_blank">Mongo Java Driver</a> 2.9+. Its Maven dependency comes with the first two, you have to <a href="http://mvnrepository.com/artifact/org.mongodb/mongo-java-driver" target="_blank">provide a dependency</a> to the driver.
                                  </p>

                                  <p>
                                    Jongo is deployed into OSS Sonatype (<i>Maven repository hosting service for open source projects</i>).<br>Add the following dependency to your pom.xml
                                  </p>

                                  <pre class="linenums">&lt;dependency&gt;
    &lt;groupId&gt;org.jongo&lt;/groupId&gt;
    &lt;artifactId&gt;jongo&lt;/artifactId&gt;
    &lt;version&gt;0.4&lt;/version&gt;
&lt;/dependency&gt;</pre>

                                  </div>
                                </div>
                              </section>

                            </div>

                            <footer>
                              <div class="container">
                                <div class="offset1">
                                  <div class="row">
                                    <div class="span9 creators">
                                      Jongo is an open source Java library created by <a href="https://twitter.com/bguerout" target="_blank">Benoît Guérout</a> and <a href="https://twitter.com/amsellemyves" target="_blank">Yves Amsellem</a>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="span2">
                                      <a href="https://jongo.ci.cloudbees.com/" target="_blank"><img src="assets/img/cloudbees-nb.png"></a>
                                    </div>
                                    <div class="span7">
                                      <p>
                                        <a href="http://www.yourkit.com/" target="_blank"><img src="assets/img/yourkit-nb.png"></a>YourKit is kindly supporting open source projects with its full-featured Java Profiler.
                                        YourKit, LLC is the creator of innovative and intelligent tools for profiling
                                        Java and .NET applications. Take a look at YourKit's leading software products:
                                        <a href="http://www.yourkit.com/java/profiler/index.jsp" target="_blank">YourKit Java Profiler</a> and
                                        <a href="http://www.yourkit.com/.net/profiler/index.jsp" target="_blank">YourKit .NET Profiler</a>.
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </footer>

                          
                          </body></html>
